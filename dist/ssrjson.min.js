/*! ssrtojson 21-11-2014 12:49 */
var SSRSearch=function(){"use strict";function a(a){var b=typeof a;return"function"===b||"object"===b&&!!a}function b(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return c.join("&")}function c(a){var b=a.split(",");return{ostLL:b[0],nordLL:b[1],ostUR:b[2],nordUR:b[3]}}function d(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d}var e=Function.prototype.bind,f=Array.prototype.slice,g=function(){},h=function(b,c){var d,h;return e&&b.bind===e?e.apply(b,f.call(arguments,1)):(d=f.call(arguments,2),h=function(){if(!(this instanceof h))return b.apply(c,d.concat(f.call(arguments)));g.prototype=b.prototype;var e=new g;g.prototype=null;var i=b.apply(e,d.concat(f.call(arguments)));return a(i)?i:e})},i=function(a){function b(a,b){var c=new DOMParser,d=c.parseFromString(a,"text/xml");return d.getElementsByTagName(b)[0]}function c(a,b){var c,d=[],e=a.childNodes,f=e.length;for(c=0;f>c;c++)e[c].nodeName===b&&d.push(e[c]);return d}function d(a,b){var c,d=a,e=b.length;for(c=0;e>c;c++)d=d.getElementsByTagName(b[c])[0];try{return d.childNodes[0].nodeValue}catch(f){return null}}function e(a){var b,c,e={},f=["ssrId","navnetype","kommunenavn","fylkesnavn","stedsnavn","aust","nord","skrivemaatestatus","spraak","skrivemaatenavn","epsgKode"],g=f.length,h={};for(c=0;g>c;c++)b=f[c],"nord"===b?h.lat=parseFloat(d(a,[b])):"aust"===b?h.lon=parseFloat(d(a,[b])):e[b]=d(a,[b]);return e.position=h,e}function f(a){var b=a.position;return delete a.position,{type:"Feature",geometry:{type:"Point",coordinates:[b.lon,b.lat]},properties:a}}function g(a){var b,c={type:"FeatureCollection",features:[]},d=a.length;for(b=0;d>b;b++)c.features.push(f(a[b]));return c}function h(a){var b,d=c(a,"stedsnavn"),f=[],g=d.length;for(b=0;g>b;b++)f.push(e(d[b]));return f}var i=b(a,"sokRes"),j="true"===d(i,["sokStatus","ok"]),k=d(i,["sokStatus","melding"]),l=parseInt(d(i,["totaltAntallTreff"]),10),m=h(i);return{sokStatus:{ok:j,melding:k},totaltAntallTreff:l,stedsnavn:m,geoJson:g(m)}},j=function(){this.isIE8=window.XDomainRequest?!0:!1};j.prototype.createRequest=function(){return this.isIE8?new window.XDomainRequest:new XMLHttpRequest},j.prototype.get=function(a,b,c){this.request=this.createRequest(),this.error=c,this.success=b,this.isIE8?(this.request.onload=h(this.handler,this),this.request.open("GET",a,!0),this.request.send()):(this.request.open("GET",a,!0),this.request.onreadystatechange=h(this.handler,this),this.request.send())},j.prototype.handler=function(){4===this.request.readyState&&(200===this.request.status?this.success(this.request.responseText):this.error(this.request.responseText))};var k=function(){this.corsRequest=new j,this.baseUrl="https://ws.geonorge.no/SKWS3Index/ssr/sok"};k.prototype.createUrl=function(a){a=d({page:0,maxRows:9,epsg:4258},a);var e={navn:a.query,antPerSide:a.maxRows,epsgKode:a.epsg,eksakteForst:"true",side:a.page};return a.bbox&&(e=d(e,c(a.bbox))),this.baseUrl+"?"+b(e)},k.prototype.search=function(a,b,c){this.orgSuccess=b,this.corsRequest.get(this.createUrl(a),h(this.success,this),c)},k.prototype.success=function(a){this.orgSuccess(i(a))};var l=new k;return{search:function(a,b,c){l.search(a,b,c)}}};